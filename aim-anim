_G.aiming = true

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local plr = Players.LocalPlayer
local ANIM_ID = 118139871934372
local track
local lastState = false

local function play(char)
	local hum = char and char:FindFirstChildOfClass("Humanoid")
	if not hum then return end

	local ok, objs = pcall(function()
		return game:GetObjects("rbxassetid://" .. ANIM_ID)
	end)

	local anim = ok and objs and objs[1]
	if anim and anim:IsA("Animation") then
		if track then pcall(function() track:Stop(0) end) end
		track = hum:LoadAnimation(anim)
		track.Looped = true
		track.Priority = Enum.AnimationPriority.Action
		track:Play()
	end
end

local function stop()
	if track then
		pcall(function() track:Stop(0) end)
		track = nil
	end
end

UserInputService.InputBegan:Connect(function(input, gpe)
	if gpe then return end
	if input.KeyCode == Enum.KeyCode.N then
		_G.aiming = not _G.aiming
	end
end)

task.spawn(function()
	while true do
		task.wait(0.1)
		if _G.aiming ~= lastState then
			lastState = _G.aiming
			if _G.aiming and plr.Character then
				play(plr.Character)
			else
				stop()
			end
		end
	end
end)

plr.CharacterAdded:Connect(function(char)
	if _G.aiming then
		play(char)
	end
end)
